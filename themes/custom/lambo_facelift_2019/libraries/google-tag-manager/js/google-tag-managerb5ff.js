"use strict";var GoogleTagManager=GoogleTagManager||{};!function(m,a){GoogleTagManager={trigger:function(e){a&&(a.push(e),App.log(e))},socialClick:function(e){var a,t={};t.event="social";var n=m(e);n.hasClass("jssocials-share-link")?(a=n.find(".fa"),t.socialAction="share",t.socialTarget=document.URL):n.hasClass("fa")&&(a=n,t.socialAction="visit",t.socialTarget=n.attr("href")),a&&0<a.length&&a.attr("class").split(/\s+/).forEach(function(e,a){"fa"!=e&&0==e.indexOf("fa-")&&(t.socialNetwork=e.replace("fa-",""))});return void 0!==t.socialAction&&GoogleTagManager.trigger(t),t},initSocialBind:function(e){m(e).find("a.fa, button.fa").on("click",function(e){var a=m(e.currentTarget);GoogleTagManager.socialClick(a[0])})},getModeInfo:function(){var e=m("body").data("model"),a={family:null,text:null};return void 0!==e&&(e=e.split(","),a.family=e[0],a.text=e[1]),a},getConf:function(e){var a=e.data("layer");return a?a=(a=(a=a.replace("{{language_name}}","undefined"!=typeof Languages?Languages.getCurrentLanguageName():"")).replace("{{href}}",e.attr("href"))).split(","):null},getDataByContext:function(e){var a=GoogleTagManager.getModeInfo(),t=GoogleTagManager.getConf(e);if(!t)return null;var n={event:t[0],eventCategory:t[1],eventAction:t[2]};if(t[3]&&(n.eventLabel=t[3]),"configuratorLight"==t[0]){if("Click from Subslider"==t[3]){var r=e.parents(".texts").find(".pagination>button.active");if(r.length<1)return;var l=r.html();n.eventLabel=t[3],n.modelCar={},n.modelCar.family=l}else if("Show Configurator"==t[2]||"3D Exterior"==t[2]||"3D Interior"==t[2]||"Switch 3D interior"==t[2]){if(n.eventLabel=a.text,n.modelCar=a,"3D Exterior"==t[2]||"3D Interior"==t[2]||"Switch 3D interior"==t[2])if(0<e.parents(".viewer-3d").length){var i=e.parents(".viewer-3d").data("model");if(!i)return null;if(i=i.split(","),n.eventLabel=i[1],n.modelCar={},n.modelCar.family=i[0],n.modelCar.text=n.eventLabel,"Switch 3D interior"==t[2]){var o=m(event.target);n.eventLabel=o.html()}else if(!e.hasClass("other"))return null}else{var g=e.data("target");void 0!==g&&0<m(g).length&&m(g).attr("data-model",n.modelCar.family+","+n.modelCar.text)}}else if("Feel the Engine"==t[2]||"Centro Stile Design"==t[2]||"Expand all Technical Specification"==t[2]||"Expand all Driving Dynamics"==t[2])n.eventLabel=a.text,n.modelCar=a;else{var f=m('header>.overlay>[data-item="left-0"]'),d=f.find(".lev-2 a.active");if(d.length<1)return null;var c=d.data("target"),s=null;void 0!==c&&(s=f.find('ul[data-item="'+c+'"]')),n.modelCar={},n.modelCar.family=d.find("span").html(),n.eventLabel=s?s.find("span").html():n.modelCar.family,n.modelCar.text=n.eventLabel}return n}if("readMoreNews"==t[0])return n.eventLabel=e.attr("href"),n.articleTag=t[3]?t[3].replace("|",","):null,n;if("dealerSearch"==t[0])return n.eventLabel=window.location.href,n;if(0<e.parents("#families-gallery").length){var v=e.parents("#families-gallery").find(".family-info").find(".family-name").attr("data-name");if(0<e.parents(".family-info").length)n.eventLabel=v;else if(0<e.parents(".model-list").length){var u=e.parents("li");0<u.length&&0<u.find(".model-name").length&&(n.eventLabel=u.find(".model-name").attr("data-name"));var h=e.data("target");void 0!==h&&m(h).find(".viewer-3d").attr("data-model",v+","+n.eventLabel)}return n}return t[3]&&(n.eventLabel=t[3]),n},init:function(e){if(e)m(document).find(e).on("click",function(e){var a=m(e.currentTarget);a.hasClass("delayed")&&a.attr("href")&&!a.attr("href").startsWith("#")&&(e.preventDefault(),setTimeout(function(){var e=a.attr("href");e&&("_blank"===a.attr("target")?window.open(e,"_blank"):window.location.href=e)},500));var t=GoogleTagManager.getDataByContext(a,e);t&&GoogleTagManager.trigger(t)});else if(0<m("body.page-node-type-locator").length){var a=m("#locator").find('button[ng-click="onSearch()"]'),r=m("#locator").find(".search-bar").find('input[ng-model="searchText"]'),t=function(e){if(!e||!e.keyCode||13==e.keyCode){var a=m("#locator").find(".dealer-types").find("li"),t=[{event:"ShowRoomSearch",eventCategory:"Show Room Locator"},{event:"ServiceSearch",eventCategory:"Service Locator"},{event:"CollisionCenterSearch",eventCategory:"Collision Center Locator"}],n=!1;a.each(function(e,a){!n&&m(a).hasClass("selected")&&(n=t[e])}),(n=n||{}).eventAction="Search",n.eventLabel=r.val(),GoogleTagManager.trigger(n)}};a.on("click",t),r.on("keypress",t)}}},0<m("html[ng-app]").length?GoogleTagManager.init():m(window).on("::appReady",function(){GoogleTagManager.init("[data-layer]")})}(jQuery,dataLayer);