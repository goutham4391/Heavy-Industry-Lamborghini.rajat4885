/*! meride-detached-subtitles 0.0.2 2020-11-17 17:29:57 copyright Mosai.co srl */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r,i,o=n(1);document.querySelectorAll||(r=document,i=r.createStyleSheet(),r.querySelectorAll=function(e,t,n,o,a){for(a=r.all,t=[],n=(e=e.replace(/\[for\b/gi,"[htmlFor").split(",")).length;n--;){for(i.addRule(e[n],"k:v"),o=a.length;o--;)a[o].currentStyle.k&&t.push(a[o]);i.removeRule(0)}return t}),window.meride=o},function(e,t,n){var r=n(2),i=window.meride||{};i.MerideCC=r,e.exports=i},function(e,t,n){var r=n(3);e.exports=function(e){if(!Meride)throw new Error("Meride library is required in order to run MerideCC");if(!e||e&&!e.embedID||e&&!e.container)throw new Error("No embedID parameter found");var t={},n=e.container,i=e.embedID,o=Meride.getPlayer({embedID:i}),a=null,c=[];disableBtn=null,initialized=!1,changeLangItems=[],currentTrack=null,autoSelectLanguage=!0===e.autoSelectLanguage;var u=function(e){n.textContent=""},l=function(e){!function(){if(null!==currentTrack&&currentTrack.cues&&currentTrack.cues.length>0)for(var e=0,t=currentTrack.cues.length;e<t;e+=1)currentTrack.cues[e].removeEventListener("exit",u)}(),currentTrack=e.target,currentTrack.cues.length>0&&(currentTrack.activeCues&&currentTrack.activeCues.length>0&&(n.textContent=currentTrack.activeCues[0].text),function(){if(null!==currentTrack&&currentTrack.cues&&currentTrack.cues.length>0)for(var e=0,t=currentTrack.cues.length;e<t;e+=1)currentTrack.cues[e].addEventListener("exit",u)}())},d=function(e){b()},s=function(e){y()},f=function(){"function"==typeof e.onDisabled&&e.onDisabled()},g=function(){"function"==typeof e.onEnabled&&e.onEnabled()},m=function(e){return e.preventDefault(),"-1"==e.target.getAttribute("data-subtitletrack")?f():g(),!1},v=function(){o.removeEventListener(Meride.EventType.LOADEDMETADATA,v),setTimeout((function(){changeLangItems=o.querySelectorAll(".subtitleTracksMenu a"),function(){for(var e=0,t=changeLangItems.length;e<t;e+=1)changeLangItems[e].addEventListener("click",m,!1)}(),y();for(var t=0,n=a.textTracks.length;t<n;t+=1)c.push({label:a.textTracks[t].label,language:a.textTracks[t].language}),a.textTracks[t].addEventListener("cuechange",l);"function"==typeof e.onReady&&e.onReady({availableLanguages:c}),!0===autoSelectLanguage&&T(navigator.language.substring(0,2))}),1e3)},y=function(){var e=document.getElementsByTagName("head");if(e.length>0&&!document.getElementById("meride-cc-custom-style")){var t=document.createElement("style");t.id="meride-cc-custom-style",t.textContent=".meride-video-container video::cue, .meride-video-container video::-webkit-media-text-track-display {                        visibility: hidden;                    }",e[0].appendChild(t)}},b=function(){if(document.getElementsByTagName("head").length>0){var e=document.getElementById("meride-cc-custom-style");e.parentNode.removeChild(e)}},p=function(){for(var e=0,t=a.textTracks.length;e<t;e+=1)a.textTracks[e].mode="disabled";f()},T=function(e){if(1!==c.indexOf(e)){var t=o.querySelector(".subtitleTracksMenu a[data-subtitlelang='"+e+"']");t?t.click():(p(),function(e){for(var t=0,n=a.textTracks.length;t<n;t+=1)a.textTracks[t].language===e&&(a.textTracks[t].mode="showing",g())}(e))}},h=function(){initialized=!0,o.addEventListener(Meride.EventType.LOADEDMETADATA,v,!1),new Promise((function(e,t){null===a?o.addEventListener(Meride.EventType.LOADEDMETADATA,(function(t){a=o.querySelector(".meride-video-container video"),e(a)})):(a=o.querySelector(".meride-video-container video"))?e(a):t(new Error("Unable to find a video element"))})).then((function(e){a=e,o.addEventListener(Meride.EventType.EXIT_FULLSCREEN,s,!1),o.addEventListener(Meride.EventType.ENTER_FULLSCREEN,d,!1),o.addEventListener("fullscreenChange",(function(e){console.log("fullscreenChange meride")}),!1),a.onwebkitpresentationmodechanged=function(e){"webkitDisplayingFullscreen"in a&&(!0===a.webkitDisplayingFullscreen?d():s())},a.addEventListener("webkitExitFullscreen",s,!1),a.addEventListener("webkitEnterFullscreen",d,!1)})).catch((function(e){console.error(e)}))};return t.init=function(){"Promise"in window?h():r.include("https://cdn.jsdelivr.net/npm/promise-polyfill@8/dist/polyfill.min.js",h,{async:!1,crossorigin:"anonymous"})},t.disableSubtitles=function(){if(!initialized)throw new Error("You must call the init method before");var e=o.querySelector(".subtitleTracksMenu a[data-subtitletrack='-1']");e?e.click():p(),n.textContent=""},t.selectSubtitle=T,t.getAvailableLanguages=function(){if(!initialized)throw new Error("You must call the init method before");return c},t.getCurrentLanguage=function(){for(var e=null,t=0,n=a.textTracks.length;t<n;t+=1)"showing"===a.textTracks[t].mode&&(e={label:a.textTracks[t].label,language:a.textTracks[t].language});return e},t}},function(e,t){var n={include:function(e,t,n){var r=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,n&&(!0===n.async&&i.setAttribute("async","true"),n.crossorigin&&i.setAttribute("crossorigin",n.crossorigin),n.onerror&&"function"==typeof n.onerror&&(i.onerror=n.onerror)),void 0!==i.onreadystatechange?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||"function"!=typeof t||t()}:(i.onload,i.onload=t),r.appendChild(i)}};e.exports=n}]);